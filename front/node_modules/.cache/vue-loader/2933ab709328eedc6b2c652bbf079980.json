{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\前端5.7\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\前端5.7\\src\\views\\Event.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\前端5.7\\src\\views\\Event.vue","mtime":1651732630627},{"path":"C:\\Users\\Administrator\\Desktop\\前端5.7\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651901507383},{"path":"C:\\Users\\Administrator\\Desktop\\前端5.7\\node_modules\\babel-loader\\lib\\index.js","mtime":1651901509007},{"path":"C:\\Users\\Administrator\\Desktop\\前端5.7\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651901507383},{"path":"C:\\Users\\Administrator\\Desktop\\前端5.7\\node_modules\\vue-loader\\lib\\index.js","mtime":1651901509384}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAvL+i/meS4quaWueazleaYr+S4gOi/m+WFpemhtemdouWwseaYvuekuuaVsOaNrgogIGNyZWF0ZWQoKSB7CiAgICAvLyDosIPnlKjlvZPliY3nmoRnZXRVc2VyTGlzdOaWueazlQogICAgdGhpcy5nZXRFdmVudExpc3QoKTsKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1cmw6ICIiLAoKICAgICAgdHlwZU9wdGlvbnM6IFsKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogIuaTjeS9nCIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogIuiuvuWkhyIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogIuadpea6kCIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogIuaWueazlSIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogIueOr+WigyIsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgdHlwZVZhbHVlOiAiIiwKCiAgICAgIGFkZEV2ZW50RGlhbG9nVmlzaWJsZTogZmFsc2UsIC8v5re75Yqg5LqL5Lu255qE5a+56K+d5qGGCgogICAgICBhZGRFdmVudEZvcm06IHsKICAgICAgICBsaW5lOiAiIiwKICAgICAgICBkYXRlOiAiIiwKICAgICAgICBtYWNoaW5lTmFtZTogIiIsCiAgICAgICAgZXZlbnROYW1lOiAiIiwKICAgICAgfSwKCiAgICAgIGV2ZW50TGlzdDogW10sIC8v5LqL5Lu25YiX6KGoCgogICAgICB0b3RhbDogMCwgLy/mgLvorrDlvZXmlbAKCiAgICAgIGV2ZW50UXVlcnlJbmZvOiB7CiAgICAgICAgcXVlcnk6ICIiLCAvL+afpeivouS/oeaBrwogICAgICAgIHBhZ2VOdW06IDEsIC8v5b2T5YmN6aG1CiAgICAgICAgcGFnZVNpemU6IDQsIC8v5q+P6aG15pyA5aSn5pWwCiAgICAgIH0sCiAgICAgIGFkZEV2ZW50Rm9ybVJ1bGVzOiB7CiAgICAgICAgbGluZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXnur/lj7ciLCB0cmlnZ2VyOiAiYmx1ciIgfV0sCiAgICAgICAgZGF0ZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXml6XmnJ8iLCB0cmlnZ2VyOiAiYmx1ciIgfV0sCiAgICAgICAgbWFjaGluZU5hbWU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXmnLrlmajlkI3np7AiLCB0cmlnZ2VyOiAiYmx1ciIgfSwKICAgICAgICBdLAogICAgICAgIGV2ZW50TmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeS6i+S7tuWQjeensCIsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgIF0sCiAgICAgIH0sCgogICAgICB1cGRhdGVGb3JtUnVsZXM6IHsKICAgICAgICBkZXNjcmliZTE6IFt7IG1lc3NhZ2U6ICLor7fovpPlhaXkuovku7bmj4/ov7AiLCB0cmlnZ2VyOiAiYmx1ciIgfV0sCiAgICAgICAgaGFwcGVuUGxhY2U6IFt7IG1lc3NhZ2U6ICLor7fovpPlhaXlj5HnlJ/ngrkiLCB0cmlnZ2VyOiAiYmx1ciIgfV0sCiAgICAgICAgcmVhc29uOiBbeyBtZXNzYWdlOiAi6K+36L6T5YWl5Y6f5ZugIiwgdHJpZ2dlcjogImJsdXIiIH1dLAogICAgICAgIHByb2JsZW1EZWZlY3Q6IFt7IG1lc3NhZ2U6ICLor7fovpPlhaXpl67popjnvLrpmbciLCB0cmlnZ2VyOiAiYmx1ciIgfV0sCiAgICAgICAgYWN0aW9uczogW3sgbWVzc2FnZTogIuivt+i+k+WFpeihjOWKqCIsIHRyaWdnZXI6ICJibHVyIiB9XSwKICAgICAgICB0cmFja3M6IFt7IG1lc3NhZ2U6ICLor7fovpPlhaXot5/ouKoiLCB0cmlnZ2VyOiAiYmx1ciIgfV0sCiAgICAgIH0sCgogICAgICAvL+S/ruaUueeUqOaIt+S/oeaBrwogICAgICB1cGRhdGVGb3JtOiB7fSwKICAgICAgLy/mmL7npLrpmpDol4/kv67mlLnnlKjmiLfmoI/lr7nor53moYYKICAgICAgdXBkYXRlRGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy/kuIrkvKDpmYTku7YKICAgIGhhbmRsZUZpbGVVcGxvYWRTdWNjZXNzKHJlcykgewogICAgICB0aGlzLnVwZGF0ZUZvcm0uZmlsZU5hbWUgPSByZXMubmFtZTsKICAgICAgdGhpcy51cGRhdGVGb3JtLnVybCA9IHJlcy51cmw7CiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5LiK5Lyg6ZmE5Lu25oiQ5Yqf77yBIik7CiAgICB9LAoKICAgIC8v5LiL6L296ZmE5Lu2CiAgICBkb3dubG9hZEZpbGUodXJsKSB7CiAgICAgIHdpbmRvdy5vcGVuKHVybCk7CiAgICB9LAoKICAgIC8vIOiOt+WPluaJgOacieS6i+S7tgogICAgYXN5bmMgZ2V0RXZlbnRMaXN0KCkgewogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoImdldEFsbEV2ZW50IiwgewogICAgICAgIHBhcmFtczogdGhpcy5ldmVudFF1ZXJ5SW5mbywKICAgICAgfSk7IC8vZ2V06K+35rGC5pa55rOVCiAgICAgIHRoaXMuZXZlbnRMaXN0ID0gcmVzLmRhdGE7CiAgICAgIHRoaXMudG90YWwgPSByZXMubnVtYmVyczsKICAgIH0sCgogICAgYWRkRXZlbnQoKSB7CiAgICAgIHRoaXMuJHJlZnMuYWRkRXZlbnRGb3JtUmVmLnZhbGlkYXRlKGFzeW5jICh2YWxpZCkgPT4gewogICAgICAgIGlmICghdmFsaWQpIHJldHVybjsKICAgICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KAogICAgICAgICAgImFkZEV2ZW50IiwKICAgICAgICAgIHRoaXMuYWRkRXZlbnRGb3JtCiAgICAgICAgKTsKICAgICAgICBpZiAocmVzICE9ICJzdWNjZXNzIikgewogICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaWsOW7uuS6i+S7tuWksei0pe+8gSIpOwogICAgICAgIH0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuaWsOW7uuS6i+S7tuaIkOWKn++8gSIpOyAvL+aPkOekuuS/oeaBrwogICAgICAgIHRoaXMuZ2V0RXZlbnRMaXN0KCk7CiAgICAgICAgdGhpcy5hZGRFdmVudERpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAoKICAgIGFkZEV2ZW50RGlhbG9nQ2xvc2VkKCkgewogICAgICB0aGlzLiRyZWZzLmFkZEV2ZW50Rm9ybVJlZi5yZXNldEZpZWxkcygpOwogICAgfSwKCiAgICAvL3BhZ2VOdW3nmoTop6blj5HliqjkvZwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UobmV3UGFnZSkgewogICAgICB0aGlzLmV2ZW50UXVlcnlJbmZvLnBhZ2VOdW0gPSBuZXdQYWdlOwogICAgICB0aGlzLmdldEV2ZW50TGlzdCgpOwogICAgfSwKCiAgICAvL+aYvuekuuS/ruaUueeUqOaIt+S/oeaBr+eahOWvueivneahhgogICAgYXN5bmMgc2hvd1VwZGF0ZURpYWxvZyhpZCkgewogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoImdldFVwZGF0ZUV2ZW50P2lkPSIgKyBpZCk7CiAgICAgIHRoaXMudXBkYXRlRm9ybSA9IHJlczsgLy/mn6Xor6Llh7rnlKjmiLfkv6Hmga/lubblj43loavlm57kv67mlLnooajljZUKICAgICAgdGhpcy51cGRhdGVEaWFsb2dWaXNpYmxlID0gdHJ1ZTsgLy/lvIDlkK/nvJbovpHlr7nor53moYYKICAgIH0sCgogICAgLy/lhbPpl63nqpflj6MKICAgIHVwZGF0ZURpYWxvZ0Nsb3NlZCgpIHsKICAgICAgdGhpcy4kcmVmcy51cGRhdGVGb3JtUmVmLnJlc2V0RmllbGRzKCk7IC8v6YeN572u5L+h5oGvCiAgICB9LAoKICAgIC8v56Gu6K6k5L+u5pS5CiAgICB1cGRhdGVFdmVudEluZm8oKSB7CiAgICAgIHRoaXMuJHJlZnMudXBkYXRlRm9ybVJlZi52YWxpZGF0ZShhc3luYyAodmFsaWQpID0+IHsKICAgICAgICBpZiAoIXZhbGlkKSByZXR1cm47IC8v6aqM6K+B5aSx6LSlCgogICAgICAgIC8vIOWPkei1t+S/ruaUueivt+axggogICAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLnB1dCgKICAgICAgICAgICJ1cGRhdGVFdmVudCIsCiAgICAgICAgICB0aGlzLnVwZGF0ZUZvcm0KICAgICAgICApOwogICAgICAgIGlmIChyZXMgIT0gInN1Y2Nlc3MiKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcigi5a6M5ZaE5LqL5Lu25YaF5a655aSx6LSl77yBIik7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLlrozlloTkuovku7blhoXlrrnmiJDlip/vvIEiKTsKICAgICAgICB0aGlzLiRyZWZzWyJ1cGxvYWQiXS5jbGVhckZpbGVzKCk7CiAgICAgICAgLy/pmpDol4/kv67mlLnnlKjmiLfkv6Hmga/lr7nor53moYYKICAgICAgICB0aGlzLnVwZGF0ZURpYWxvZ1Zpc2libGUgPSBmYWxzZTsKCiAgICAgICAgdGhpcy5nZXRFdmVudExpc3QoKTsKICAgICAgfSk7CiAgICB9LAoKICAgIGFzeW5jIGNsb3NlRXZlbnQoaWQpIHsKICAgICAgY29uc3QgeyBkYXRhOiByZXMxIH0gPSBhd2FpdCB0aGlzLiRodHRwLmdldCgiZ2V0VXBkYXRlRXZlbnQ/aWQ9IiArIGlkKTsKICAgICAgdGhpcy51cGRhdGVGb3JtID0gcmVzMTsgLy/mn6Xor6Llh7rnlKjmiLfkv6Hmga/lubblj43loavlm57kv67mlLnooajljZUKICAgICAgaWYgKAogICAgICAgIHRoaXMudXBkYXRlRm9ybS5kZXNjcmliZTEgPT0gIiIgfHwKICAgICAgICB0aGlzLnVwZGF0ZUZvcm0uZGVzY3JpYmUxID09IHVuZGVmaW5lZCB8fAogICAgICAgIHRoaXMudXBkYXRlRm9ybS5ldmVudFR5cGUgPT0gIiIgfHwKICAgICAgICB0aGlzLnVwZGF0ZUZvcm0uZXZlbnRUeXBlID09IHVuZGVmaW5lZCB8fAogICAgICAgIHRoaXMudXBkYXRlRm9ybS5oYXBwZW5QbGFjZSA9PSAiIiB8fAogICAgICAgIHRoaXMudXBkYXRlRm9ybS5oYXBwZW5QbGFjZSA9PSB1bmRlZmluZWQgfHwKICAgICAgICB0aGlzLnVwZGF0ZUZvcm0ucmVhc29uID09ICIiIHx8CiAgICAgICAgdGhpcy51cGRhdGVGb3JtLnJlYXNvbiA9PSB1bmRlZmluZWQgfHwKICAgICAgICB0aGlzLnVwZGF0ZUZvcm0ucHJvYmxlbURlZmVjdCA9PSAiIiB8fAogICAgICAgIHRoaXMudXBkYXRlRm9ybS5wcm9ibGVtRGVmZWN0ID09IHVuZGVmaW5lZCB8fAogICAgICAgIHRoaXMudXBkYXRlRm9ybS5hY3Rpb25zID09ICIiIHx8CiAgICAgICAgdGhpcy51cGRhdGVGb3JtLmFjdGlvbnMgPT0gdW5kZWZpbmVkIHx8CiAgICAgICAgdGhpcy51cGRhdGVGb3JtLnRyYWNrcyA9PSAiIiB8fAogICAgICAgIHRoaXMudXBkYXRlRm9ybS50cmFja3MgPT0gdW5kZWZpbmVkCiAgICAgICkgewogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCLor7flhYjlrozlloTkuovku7blhoXlrrkiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBjb25maXJtUmVzdWx0ID0gYXdhaXQgdGhpcy4kY29uZmlybSgKICAgICAgICAgICLmraTmk43kvZzlsIblhbPpl63kuovku7bvvIzmmK/lkKbnu6fnu63vvJ8iLAogICAgICAgICAgIuaPkOekuiIsCiAgICAgICAgICB7CiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwKICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsCiAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgIH0KICAgICAgICApLmNhdGNoKChlcnIpID0+IGVycik7IC8v5oqK57uT5p6c5L+h5oGv5pS+6L+b5LqGY29uZmlybVJlc3VsdOS4rQogICAgICAgIGlmIChjb25maXJtUmVzdWx0ICE9ICJjb25maXJtIikgewogICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuaW5mbygi5bey5Y+W5raI5YWz6ZetIik7CiAgICAgICAgfQogICAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLmRlbGV0ZSgiL2RlbGV0ZUV2ZW50P2lkPSIgKyBpZCk7CiAgICAgICAgaWYgKHJlcyAhPSAic3VjY2VzcyIpIHsKICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCLlhbPpl63kuovku7blpLHotKXvvIEiKTsKICAgICAgICB9CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLlhbPpl63kuovku7bmiJDlip/vvIEiKTsKICAgICAgICB0aGlzLmdldEV2ZW50TGlzdCgpOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Event.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Event.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <!-- 面包屑 -->\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>巡检事件板块</el-breadcrumb-item>\n      <el-breadcrumb-item>主要设备问题</el-breadcrumb-item>\n    </el-breadcrumb>\n\n    <el-card>\n      <el-button type=\"primary\" @click=\"addEventDialogVisible = true\"\n        >新建事件</el-button\n      >\n      <!-- <el-button type=\"primary\"\n                 @click=\"addEventDialogVisible = true\">修改事件</el-button> -->\n      <el-button type=\"primary\" @click=\"addEventDialogVisible = true\"\n        >合并事件</el-button\n      >\n      <el-table :data=\"eventList\" border stripe>\n        <!-- 把列的type设置成index类型就成为了索引列 -->\n        <el-table-column type=\"index\"></el-table-column>\n\n        <el-table-column label=\"线号\" prop=\"line\"> </el-table-column>\n        <el-table-column label=\"日期\" prop=\"date\"> </el-table-column>\n\n        <el-table-column label=\"机器名\" prop=\"machineName\"> </el-table-column>\n\n        <el-table-column label=\"事件名\" prop=\"eventName\"> </el-table-column>\n        <el-table-column label=\"事件类型\" prop=\"eventType\"> </el-table-column>\n        <el-table-column label=\"附件\" prop=\"fileName\"> </el-table-column>\n        <el-table-column label=\"事件操作\" width=\"180px\">\n          <!-- scope里封存了该行用户的所有信息 -->\n          <template slot-scope=\"scope\">\n            <!-- 填写事件内容按钮 -->\n\n            <el-tooltip content=\"填写事件内容\" placement=\"top\" effect=\"light\">\n              <el-button\n                type=\"primary\"\n                icon=\"el-icon-edit\"\n                plain\n                round\n                size=\"mini\"\n                @click=\"showUpdateDialog(scope.row.id)\"\n              ></el-button>\n            </el-tooltip>\n\n            <el-tooltip content=\"下载附件\" placement=\"top\" effect=\"light\">\n              <el-button\n                type=\"success\"\n                icon=\"el-icon-download\"\n                plain\n                round\n                size=\"mini\"\n                @click=\"downloadFile(scope.row.url)\"\n              ></el-button>\n            </el-tooltip>\n\n            <!-- 事件关闭按钮 -->\n            <el-tooltip content=\"关闭事件\" placement=\"top\" effect=\"light\">\n              <el-button\n                type=\"danger\"\n                icon=\"el-icon-delete\"\n                round\n                plain\n                size=\"mini\"\n                @click=\"closeEvent(scope.row.id)\"\n              ></el-button>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n      </el-table>\n      <!-- element分页组件 没有设置每页最大变化数 current-page：当前页 page-size表示每页最大数据条数 total表示总数据数-->\n      <!-- 分页 -->\n      <el-pagination\n        @current-change=\"handleCurrentChange\"\n        :current-page.sync=\"eventQueryInfo.pageNum\"\n        :page-size=\"eventQueryInfo.pageSize\"\n        layout=\"total, prev, pager, next,jumper\"\n        :total=\"total\"\n      >\n      </el-pagination>\n    </el-card>\n\n    <!-- 新增事件区域 visible:表示是否显示对话框  @close关闭tag时触发的事件-->\n    <el-dialog\n      title=\"添加事件\"\n      :visible.sync=\"addEventDialogVisible\"\n      width=\"40%\"\n      @close=\"addEventDialogClosed\"\n      v-dialogDrag\n    >\n      <!--red:校验规则的内容 存放在addFormRef下 -->\n      <!-- 添加用户对话框里的表单内容 -->\n      <el-form\n        :model=\"addEventForm\"\n        :rules=\"addEventFormRules\"\n        ref=\"addEventFormRef\"\n        label-width=\"80px\"\n      >\n        <!-- 机器名称 -->\n        <el-form-item label=\"线号\" prop=\"line\">\n          <el-input v-model=\"addEventForm.line\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"日期\" prop=\"date\">\n          <el-input v-model=\"addEventForm.date\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"机器名称\" prop=\"machineName\">\n          <el-input v-model=\"addEventForm.machineName\"></el-input>\n        </el-form-item>\n        <!-- 事件名称 -->\n        <el-form-item label=\"事件名称\" prop=\"eventName\">\n          <el-input v-model=\"addEventForm.eventName\"></el-input>\n        </el-form-item>\n      </el-form>\n      <!-- 表单底部按钮 -->\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"addEventDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"addEvent\">确定</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 填写事件内容的对话框 -->\n    <el-dialog\n      title=\"填写事件内容\"\n      :visible.sync=\"updateDialogVisible\"\n      width=\"42%\"\n      @close=\"updateDialogClosed\"\n      v-dialogDrag\n    >\n      <!--ref:校验规则的内容 updateForm -->\n      <!-- 填写事件内容对话框里的表单内容 -->\n      <el-form\n        :model=\"updateForm\"\n        :rules=\"updateFormRules\"\n        ref=\"updateFormRef\"\n        label-width=\"70px\"\n      >\n        <!-- 类型 -->\n        <el-form-item label=\"类型\" prop=\"eventType\">\n          <el-select\n            v-model=\"updateForm.eventType\"\n            placeholder=\"请选择事件类型\"\n            style=\"width: 160px\"\n          >\n            <el-option\n              v-for=\"item in typeOptions\"\n              :key=\"item.value\"\n              :value=\"item.value\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n        <!-- 描述 -->\n        <el-form-item label=\"描述\" prop=\"describe1\">\n          <el-input type=\"textarea\" v-model=\"updateForm.describe1\"></el-input>\n        </el-form-item>\n        <!-- 发生点 -->\n        <el-form-item label=\"地点\" prop=\"happenPlace\">\n          <el-input type=\"textarea\" v-model=\"updateForm.happenPlace\"></el-input>\n        </el-form-item>\n        <!-- 原因 -->\n        <el-form-item label=\"原因\" prop=\"reason\">\n          <el-input type=\"textarea\" v-model=\"updateForm.reason\"></el-input>\n        </el-form-item>\n        <!-- 问题缺陷 -->\n        <el-form-item label=\"缺陷\" prop=\"problemDefect\">\n          <el-input\n            type=\"textarea\"\n            v-model=\"updateForm.problemDefect\"\n          ></el-input>\n        </el-form-item>\n        <!-- 行动 -->\n        <el-form-item label=\"行动\" prop=\"actions\">\n          <el-input type=\"textarea\" v-model=\"updateForm.actions\"></el-input>\n        </el-form-item>\n        <!-- 跟踪 -->\n        <el-form-item label=\"跟踪\" prop=\"tracks\">\n          <el-input type=\"textarea\" v-model=\"updateForm.tracks\"></el-input>\n        </el-form-item>\n\n        <!-- 上传文件 -->\n\n        <el-form-item>\n          <el-upload\n            :action=\"'http://localhost:9000/uploadFile'\"\n            :on-success=\"handleFileUploadSuccess\"\n            ref=\"upload\"\n          >\n            <el-button type=\"success\" class=\"upload\">上传附件</el-button>\n          </el-upload>\n        </el-form-item>\n      </el-form>\n      <!-- 表单底部按钮 -->\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"updateDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"updateEventInfo\">确定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  //这个方法是一进入页面就显示数据\n  created() {\n    // 调用当前的getUserList方法\n    this.getEventList();\n  },\n  data() {\n    return {\n      url: \"\",\n\n      typeOptions: [\n        {\n          value: \"操作\",\n        },\n        {\n          value: \"设备\",\n        },\n        {\n          value: \"来源\",\n        },\n        {\n          value: \"方法\",\n        },\n        {\n          value: \"环境\",\n        },\n      ],\n      typeValue: \"\",\n\n      addEventDialogVisible: false, //添加事件的对话框\n\n      addEventForm: {\n        line: \"\",\n        date: \"\",\n        machineName: \"\",\n        eventName: \"\",\n      },\n\n      eventList: [], //事件列表\n\n      total: 0, //总记录数\n\n      eventQueryInfo: {\n        query: \"\", //查询信息\n        pageNum: 1, //当前页\n        pageSize: 4, //每页最大数\n      },\n      addEventFormRules: {\n        line: [{ required: true, message: \"请输入线号\", trigger: \"blur\" }],\n        date: [{ required: true, message: \"请输入日期\", trigger: \"blur\" }],\n        machineName: [\n          { required: true, message: \"请输入机器名称\", trigger: \"blur\" },\n        ],\n        eventName: [\n          { required: true, message: \"请输入事件名称\", trigger: \"blur\" },\n        ],\n      },\n\n      updateFormRules: {\n        describe1: [{ message: \"请输入事件描述\", trigger: \"blur\" }],\n        happenPlace: [{ message: \"请输入发生点\", trigger: \"blur\" }],\n        reason: [{ message: \"请输入原因\", trigger: \"blur\" }],\n        problemDefect: [{ message: \"请输入问题缺陷\", trigger: \"blur\" }],\n        actions: [{ message: \"请输入行动\", trigger: \"blur\" }],\n        tracks: [{ message: \"请输入跟踪\", trigger: \"blur\" }],\n      },\n\n      //修改用户信息\n      updateForm: {},\n      //显示隐藏修改用户栏对话框\n      updateDialogVisible: false,\n    };\n  },\n  methods: {\n    //上传附件\n    handleFileUploadSuccess(res) {\n      this.updateForm.fileName = res.name;\n      this.updateForm.url = res.url;\n      this.$message.success(\"上传附件成功！\");\n    },\n\n    //下载附件\n    downloadFile(url) {\n      window.open(url);\n    },\n\n    // 获取所有事件\n    async getEventList() {\n      const { data: res } = await this.$http.get(\"getAllEvent\", {\n        params: this.eventQueryInfo,\n      }); //get请求方法\n      this.eventList = res.data;\n      this.total = res.numbers;\n    },\n\n    addEvent() {\n      this.$refs.addEventFormRef.validate(async (valid) => {\n        if (!valid) return;\n        const { data: res } = await this.$http.post(\n          \"addEvent\",\n          this.addEventForm\n        );\n        if (res != \"success\") {\n          return this.$message.error(\"新建事件失败！\");\n        }\n        this.$message.success(\"新建事件成功！\"); //提示信息\n        this.getEventList();\n        this.addEventDialogVisible = false;\n      });\n    },\n\n    addEventDialogClosed() {\n      this.$refs.addEventFormRef.resetFields();\n    },\n\n    //pageNum的触发动作\n    handleCurrentChange(newPage) {\n      this.eventQueryInfo.pageNum = newPage;\n      this.getEventList();\n    },\n\n    //显示修改用户信息的对话框\n    async showUpdateDialog(id) {\n      const { data: res } = await this.$http.get(\"getUpdateEvent?id=\" + id);\n      this.updateForm = res; //查询出用户信息并反填回修改表单\n      this.updateDialogVisible = true; //开启编辑对话框\n    },\n\n    //关闭窗口\n    updateDialogClosed() {\n      this.$refs.updateFormRef.resetFields(); //重置信息\n    },\n\n    //确认修改\n    updateEventInfo() {\n      this.$refs.updateFormRef.validate(async (valid) => {\n        if (!valid) return; //验证失败\n\n        // 发起修改请求\n        const { data: res } = await this.$http.put(\n          \"updateEvent\",\n          this.updateForm\n        );\n        if (res != \"success\") return this.$message.error(\"完善事件内容失败！\");\n        this.$message.success(\"完善事件内容成功！\");\n        this.$refs[\"upload\"].clearFiles();\n        //隐藏修改用户信息对话框\n        this.updateDialogVisible = false;\n\n        this.getEventList();\n      });\n    },\n\n    async closeEvent(id) {\n      const { data: res1 } = await this.$http.get(\"getUpdateEvent?id=\" + id);\n      this.updateForm = res1; //查询出用户信息并反填回修改表单\n      if (\n        this.updateForm.describe1 == \"\" ||\n        this.updateForm.describe1 == undefined ||\n        this.updateForm.eventType == \"\" ||\n        this.updateForm.eventType == undefined ||\n        this.updateForm.happenPlace == \"\" ||\n        this.updateForm.happenPlace == undefined ||\n        this.updateForm.reason == \"\" ||\n        this.updateForm.reason == undefined ||\n        this.updateForm.problemDefect == \"\" ||\n        this.updateForm.problemDefect == undefined ||\n        this.updateForm.actions == \"\" ||\n        this.updateForm.actions == undefined ||\n        this.updateForm.tracks == \"\" ||\n        this.updateForm.tracks == undefined\n      ) {\n        return this.$message.error(\"请先完善事件内容\");\n      } else {\n        const confirmResult = await this.$confirm(\n          \"此操作将关闭事件，是否继续？\",\n          \"提示\",\n          {\n            confirmButtonText: \"确定\",\n            cancelButtonText: \"取消\",\n            type: \"warning\",\n          }\n        ).catch((err) => err); //把结果信息放进了confirmResult中\n        if (confirmResult != \"confirm\") {\n          return this.$message.info(\"已取消关闭\");\n        }\n        const { data: res } = await this.$http.delete(\"/deleteEvent?id=\" + id);\n        if (res != \"success\") {\n          return this.$message.error(\"关闭事件失败！\");\n        }\n        this.$message.success(\"关闭事件成功！\");\n        this.getEventList();\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.el-table {\n  margin-top: 15px;\n  font-size: 15px;\n}\n\n.upload {\n  width: 150px;\n}\n</style>\n"]}]}