{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\前端5.7\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\前端5.7\\src\\views\\Efficiency.vue?vue&type=style&index=0&id=38c0dba3&lang=less&scoped=true&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\前端5.7\\src\\views\\Efficiency.vue","mtime":1652089284774},{"path":"C:\\Users\\Administrator\\Desktop\\前端5.7\\node_modules\\css-loader\\dist\\cjs.js","mtime":1651901507998},{"path":"C:\\Users\\Administrator\\Desktop\\前端5.7\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1651901510113},{"path":"C:\\Users\\Administrator\\Desktop\\前端5.7\\node_modules\\postcss-loader\\src\\index.js","mtime":1651901508984},{"path":"C:\\Users\\Administrator\\Desktop\\前端5.7\\node_modules\\less-loader\\dist\\cjs.js","mtime":1651901508660},{"path":"C:\\Users\\Administrator\\Desktop\\前端5.7\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651901507383},{"path":"C:\\Users\\Administrator\\Desktop\\前端5.7\\node_modules\\vue-loader\\lib\\index.js","mtime":1651901509384}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouVGllcjFCb3ggewogIC8v5LiL6Z2i6L+Z5Zub5p2h6K+t5Y+l5Y+v5Lul6K6pZGl25p2/5Z2X5bGF5LitCiAgcG9zaXRpb246IGFic29sdXRlOwogIGxlZnQ6IDUwJTsKICB0b3A6IDUwJTsKICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsKfQoKI2hpc3RvcnlUYWJsZSB7CiAgZGlzcGxheTogbm9uZTsKCiAgcGFkZGluZy1yaWdodDogMjBweDsKfQoKLmhpc3RvcnlTcGFuIHsKICBwYWRkaW5nLWxlZnQ6IDEwcHg7CiAgZm9udC1mYW1pbHk6IE1pY3Jvc29mdCBZYUhlaTsKICBmb250LXNpemU6IDE0cHg7CiAgY29sb3I6ICM5MDkzOTk7CiAgZm9udC13ZWlnaHQ6IGJvbGQ7Cn0KCi50aWVyX2Vscm93IHsKICBkaXNwbGF5OiBibG9jazsKICBmbG9hdDogbGVmdDsKICB3aWR0aDogNTAlOwogIGhlaWdodDogMzAwcHg7Cn0KCi50aWVyXzFfZWxjb2wgewogIGhlaWdodDogNDlweDsKICAvLyBiYWNrZ3JvdW5kOiByZWQ7CiAgbWFyZ2luLXRvcDogNDdweDsKICBwYWRkaW5nLXRvcDogMTJweDsKICBmb250OiAxNHB4LCBNaWNyb3NvZnQgWWFIZWk7CiAgYm9yZGVyOiBzb2xpZCAxcHggbGlnaHRncmF5OwogIGJvcmRlci1sZWZ0LXN0eWxlOiBub25lOwogIGJvcmRlci1yaWdodC1zdHlsZTogbm9uZTsKICBjb2xvcjogIzYwNjI2NjsKfQoKLnRpZXJfMl9lbGNvbCB7CiAgaGVpZ2h0OiA0N3B4OwogIHBhZGRpbmctdG9wOiAxMnB4OwogIGZvbnQ6IDE0cHgsIE1pY3Jvc29mdCBZYUhlaTsKICBjb2xvcjogIzYwNjI2NjsKICBiYWNrZ3JvdW5kOiAjZmFmYWZhOwp9CgoudGllcl8zX2VsY29sIHsKICBoZWlnaHQ6IDQ5cHg7CiAgcGFkZGluZy10b3A6IDEycHg7CiAgZm9udDogMTRweCwgTWljcm9zb2Z0IFlhSGVpOwogIGJvcmRlcjogc29saWQgMXB4IGxpZ2h0Z3JheTsKICBib3JkZXItbGVmdC1zdHlsZTogbm9uZTsKICBib3JkZXItcmlnaHQtc3R5bGU6IG5vbmU7CiAgYm9yZGVyLWJvdHRvbS1zdHlsZTogbm9uZTsKICBjb2xvcjogIzYwNjI2NjsKfQoKLnRpZXJfNF9lbGNvbCB7CiAgaGVpZ2h0OiA1MHB4OwogIHBhZGRpbmctdG9wOiAxMnB4OwogIGZvbnQ6IDE0cHgsIE1pY3Jvc29mdCBZYUhlaTsKICBib3JkZXI6IHNvbGlkIDFweCBsaWdodGdyYXk7CiAgYm9yZGVyLWxlZnQtc3R5bGU6IG5vbmU7CiAgYm9yZGVyLXJpZ2h0LXN0eWxlOiBub25lOwogIGNvbG9yOiAjNjA2MjY2OwogIGJhY2tncm91bmQ6ICNmYWZhZmE7CiAgbWFyZ2luLXRvcDogLTFweDsKfQo="},{"version":3,"sources":["Efficiency.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoZA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Efficiency.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <!-- 面包屑 -->\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>巡检普通板块</el-breadcrumb-item>\n      <el-breadcrumb-item>效率评价</el-breadcrumb-item>\n    </el-breadcrumb>\n\n    <el-card>\n      <el-button type=\"primary\"\n                 @click=\"addRecordDialogVisible = true\">新建记录</el-button>\n\n      <el-button type=\"primary\"\n                 @click=\"updateRecordDialogVisible = true\">修改记录</el-button>\n\n      <el-button type=\"primary\"\n                 @click=\"refreshRecord\">更新记录</el-button>\n\n      <el-button type=\"primary\"\n                 @click=\"showTable\">查看历史记录</el-button>\n\n      <el-button type=\"primary\">导出</el-button>\n    </el-card>\n\n    <el-card>\n      <!-- Tier1会议填写表格 stripe:斑马线格式-->\n      <el-table :data=\"problemList\"\n                stripe\n                style=\"width: 50%; float: left\">\n        <el-table-column prop=\"problem\"\n                         label=\"效率评价\"\n                         width=\"600px\">\n        </el-table-column>\n      </el-table>\n\n      <el-row v-for=\"(item, index) in efficiencyRecordList\"\n              :key=\"index\"\n              :label1=\"item\"\n              class=\"tier_elrow\">\n        <el-col class=\"tier_1_elcol\">&nbsp;记录1:&nbsp;{{ item.effiq1answer }}</el-col>\n        <el-col class=\"tier_2_elcol\">&nbsp;记录2:&nbsp;{{ item.effiq2answer }}</el-col>\n        <el-col class=\"tier_3_elcol\">&nbsp;记录3:&nbsp;{{ item.effiq3answer }}</el-col>\n        <el-col class=\"tier_4_elcol\">&nbsp;记录4:&nbsp;{{ item.effiq4answer }}</el-col>\n      </el-row>\n    </el-card>\n\n    <!-- 新增Tier记录区域 visible:表示是否显示对话框  @close关闭tag时触发的事件-->\n    <el-dialog title=\"新建记录\"\n               :visible.sync=\"addRecordDialogVisible\"\n               width=\"40%\"\n               @close=\"addRecordDialogClosed\"\n               v-dialogDrag>\n      <!--red:校验规则的内容 存放在addFormRef下 -->\n      <!-- 添加记录对话框里的表单内容 -->\n      <el-form :model=\"addRecordForm\"\n               :rules=\"addRecordFormRules\"\n               ref=\"addRecordFormRef\"\n               label-width=\"70px\">\n        <!-- Tier1会议问题1记录 -->\n        <el-form-item label=\"Effi1-1\"\n                      prop=\"effiq1answer\">\n          <el-input v-model=\"addRecordForm.effiq1answer\"></el-input>\n        </el-form-item>\n\n        <!-- Tier1会议问题2记录 -->\n        <el-form-item label=\"Effi1-2\"\n                      prop=\"effiq2answer\">\n          <el-input v-model=\"addRecordForm.effiq2answer\"></el-input>\n        </el-form-item>\n\n        <!-- Tier1会议问题3记录 -->\n        <el-form-item label=\"Effi1-3\"\n                      prop=\"effiq3answer\">\n          <el-input v-model=\"addRecordForm.effiq3answer\"></el-input>\n        </el-form-item>\n\n        <!-- Tier1会议问题4记录 -->\n        <el-form-item label=\"Effi1-4\"\n                      prop=\"effiq4answer\">\n          <el-input v-model=\"addRecordForm.effiq4answer\"></el-input>\n        </el-form-item>\n      </el-form>\n\n      <!-- 表单底部按钮 -->\n      <span slot=\"footer\"\n            class=\"dialog-footer\">\n        <el-button @click=\"addRecordDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\"\n                   @click=\"addRecord\">确定</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 修改记录信息的对话框 -->\n    <el-dialog title=\"修改记录\"\n               :visible.sync=\"updateRecordDialogVisible\"\n               width=\"40%\"\n               @close=\"updateRecordDialogClosed\"\n               v-dialogDrag>\n      <!--ref:校验规则的内容 updateForm -->\n      <!-- 修改记录信息对话框里的表单内容 -->\n      <el-form :model=\"updateRecordForm\"\n               :rules=\"addRecordFormRules\"\n               ref=\"updateRecordFormRef\"\n               label-width=\"70px\"\n               v-for=\"(item, index) in efficiencyRecordList\"\n               :key=\"index\"\n               :label2=\"item\">\n        <!-- :placeholder=\"item.t1q1answer\" -->\n        <!-- Tier1会议问题1记录 -->\n        <el-form-item label=\"Effi1-1\"\n                      prop=\"effiq1answer\">\n          <el-input v-model=\"updateRecordForm.effiq1answer\"></el-input>\n        </el-form-item>\n\n        <!-- Tier1会议问题2记录 -->\n        <el-form-item label=\"Effi1-2\"\n                      prop=\"effiq2answer\">\n          <el-input v-model=\"updateRecordForm.effiq2answer\"></el-input>\n        </el-form-item>\n\n        <!-- Tier1会议问题3记录 -->\n        <el-form-item label=\"Effi1-3\"\n                      prop=\"effiq3answer\">\n          <el-input v-model=\"updateRecordForm.effiq3answer\"></el-input>\n        </el-form-item>\n\n        <!-- Tier1会议问题4记录 -->\n        <el-form-item label=\"Effi1-4\"\n                      prop=\"effiq4answer\">\n          <el-input v-model=\"updateRecordForm.effiq4answer\"></el-input>\n        </el-form-item>\n      </el-form>\n\n      <!-- 表单底部按钮 -->\n      <span slot=\"footer\"\n            class=\"dialog-footer\">\n        <el-button @click=\"updateRecordDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\"\n                   @click=\"updateRecordInfo\">确定</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 分割线 -->\n    <el-divider></el-divider>\n    <el-card>\n      <div id=\"main\"\n           style=\"float:left;width:100%;height:330px\"></div>\n    </el-card>\n    <el-divider></el-divider>\n    <!-- 查看历史记录 -->\n    <el-card style=\"height:450px\"\n             id=\"historyTable\">\n      <span class=\"historySpan\">效率评价历史记录</span>\n      <el-table :data=\"efficiencyRecordList1\"\n                stripe\n                height=\"295\"\n                :header-row-style=\"{ height: '60px' }\">\n        <el-table-column prop=\"name\"\n                         label=\"姓名\"\n                         style=\"margin-top: 20px\">\n        </el-table-column>\n        <el-table-column prop=\"date\"\n                         label=\"日期\"> </el-table-column>\n        <el-table-column prop=\"shift\"\n                         label=\"班次\"> </el-table-column>\n        <el-table-column prop=\"line\"\n                         label=\"线号\"> </el-table-column>\n        <el-table-column prop=\"effiq1answer\"\n                         label=\"效率评价题1记录\">\n        </el-table-column>\n        <el-table-column prop=\"effiq2answer\"\n                         label=\"效率评价题2记录\">\n        </el-table-column>\n        <el-table-column prop=\"effiq3answer\"\n                         label=\"效率评价题3记录\">\n        </el-table-column>\n        <el-table-column prop=\"effiq4answer\"\n                         label=\"效率评价题4记录\">\n        </el-table-column>\n      </el-table>\n    </el-card>\n\n  </div>\n</template>\n\n<script>\nimport * as echarts from 'echarts';\nexport default {\n  //这个方法是一进入页面就显示数据\n  created () {\n    // 调用当前的getUserList方法\n    this.getEfficiencyRecordList();\n    this.getEfficiencyRecordList1();\n    this.getProblemList();\n  },\n\n  mounted () {\n    var option = {\n      title: {\n        text: '当前产线P值'\n      },\n      tooltip: {},\n      legend: {\n        data: ['P值']\n\n      },\n      xAxis: {\n        data: [],\n      },\n      yAxis: {},\n      series: [{\n        name: 'P值',\n        type: 'line',\n        data: [],\n      }]\n    }\n    var chart = document.getElementById('main');\n    var chartData = echarts.init(chart);\n\n    this.$http.get(\"getP\").then(function (res) {\n      option.xAxis.data = res.data.x\n      option.series[0].data = res.data.y\n      chartData.setOption(option, true);\n    })\n  },\n\n  data () {\n    return {\n      addRecordDialogVisible: false, //添加记录的对话框\n\n      updateRecordDialogVisible: false, //修改记录的对话框\n\n      addRecordForm: {\n        effiq1answer: \"\",\n        effiq2answer: \"\",\n        effiq3answer: \"\",\n        effiq4answer: \"\",\n      },\n\n      addRecordFormRules: {\n        effiq1answer: [\n          {\n            required: true,\n            message: \"请输入效率评价问题1记录\",\n            trigger: \"blur\",\n          },\n        ],\n        effiq2answer: [\n          {\n            required: true,\n            message: \"请输入效率评价问题2记录\",\n            trigger: \"blur\",\n          },\n        ],\n        effiq3answer: [\n          {\n            required: true,\n            message: \"请输入效率评价问题3记录\",\n            trigger: \"blur\",\n          },\n        ],\n        effiq4answer: [\n          {\n            required: true,\n            message: \"请输入效率评价问题4记录\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n\n      updateRecordForm: [],\n\n      efficiencyRecordList: [], //记录列表\n\n      problemList: [],\n\n      efficiencyRecordList1: [],\n    };\n  },\n\n  methods: {\n\n    showTable () {\n      var zt = document.getElementById('historyTable')\n      if (zt.style.display != \"block\") {\n        zt.style.display = 'block'\n      } else if (zt.style.display != \"none\") {\n        zt.style.display = 'none'\n      }\n    },\n\n    addRecord () {\n      this.$refs.addRecordFormRef.validate(async (valid) => {\n        if (!valid) return;\n        const { data: res } = await this.$http.post(\n          \"addEfficiencyRecord\",\n          this.addRecordForm\n        );\n        if (res != \"success\") {\n          return this.$message.error(\"新建记录失败！\");\n        }\n        this.$message.success(\"新建记录成功！\"); //提示信息\n        this.getEfficiencyRecordList();\n        this.addRecordDialogVisible = false;\n      });\n    },\n\n    addRecordDialogClosed () {\n      this.$refs.addRecordFormRef.resetFields();\n    },\n\n    //关闭窗口\n    updateRecordDialogClosed () {\n      this.updateRecordDialogVisible = false; //重置信息\n      this.getEfficiencyRecordList();\n    },\n\n    //确认修改\n    updateRecordInfo () {\n      this.$refs.updateRecordFormRef[0].validate(async (valid) => {\n        if (!valid) return; //验证失败\n\n        // 发起修改请求\n        const { data: res } = await this.$http.put(\n          \"updateEfficiencyRecord\",\n          this.updateRecordForm\n        );\n        if (res != \"success\") return this.$message.error(\"修改记录失败！\");\n        this.$message.success(\"修改记录成功！\");\n        this.getEfficiencyRecordList();\n        //隐藏修改记录信息对话框\n        this.updateRecordDialogVisible = false;\n      });\n    },\n\n    // 获取所有问题信息\n    // async getProblemList () {\n    //   const { data: res } = await this.$http.get(\"getEffiProblem\"); //get请求方法\n    //   this.problemList = res.data;\n    // },\n\n    getProblemList() {\n      this.request.get(\"/getEffiProblem\").then(res => {\n        this.problemList = res.data\n      })},\n\n    // 获取所有记录信息\n    async getEfficiencyRecordList () {\n      const { data: res } = await this.$http.get(\"getEfficiencyRecordItem\"); //get请求方法\n      this.efficiencyRecordList = res.data;\n      this.updateRecordForm = res.data[0];\n      this.getEfficiencyRecordList1();\n    },\n\n    // 获取所有记录信息(包括HeadData)\n    async getEfficiencyRecordList1 () {\n      const { data: res } = await this.$http.get(\"getEfficiencyRecordList\"); //get请求方法\n      // console.log(res);\n      this.efficiencyRecordList1 = res.data;\n    },\n\n    async refreshRecord () {\n      this.getEfficiencyRecordList();\n      this.$message.success(\"更新记录成功！\");\n    },\n\n    // async statistics () {\n    //   // 基于准备好的dom，初始化echarts实例\n    //   var chart = document.getElementById('main');\n    //   var chartData = echarts.init(chart);\n\n    //   // 绘制图表\n    //   this.$http.get('getP').then(function (res) {\n\n    //     chartData.setOption({\n    //       title: {\n    //         text: '当前产线P值'\n    //       },\n    //       tooltip: {},\n    //       legend: {\n    //         data: ['P值']\n\n    //       },\n    //       xAxis: {\n    //         data: res.data.x\n    //       },\n    //       yAxis: {},\n    //       series: [{\n    //         name: 'P值',\n    //         type: 'line',\n    //         data: res.data.y\n    //       }]\n    //     });\n    //   })\n    // },\n\n\n\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.Tier1Box {\n  //下面这四条语句可以让div板块居中\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n}\n\n#historyTable {\n  display: none;\n\n  padding-right: 20px;\n}\n\n.historySpan {\n  padding-left: 10px;\n  font-family: Microsoft YaHei;\n  font-size: 14px;\n  color: #909399;\n  font-weight: bold;\n}\n\n.tier_elrow {\n  display: block;\n  float: left;\n  width: 50%;\n  height: 300px;\n}\n\n.tier_1_elcol {\n  height: 49px;\n  // background: red;\n  margin-top: 47px;\n  padding-top: 12px;\n  font: 14px, Microsoft YaHei;\n  border: solid 1px lightgray;\n  border-left-style: none;\n  border-right-style: none;\n  color: #606266;\n}\n\n.tier_2_elcol {\n  height: 47px;\n  padding-top: 12px;\n  font: 14px, Microsoft YaHei;\n  color: #606266;\n  background: #fafafa;\n}\n\n.tier_3_elcol {\n  height: 49px;\n  padding-top: 12px;\n  font: 14px, Microsoft YaHei;\n  border: solid 1px lightgray;\n  border-left-style: none;\n  border-right-style: none;\n  border-bottom-style: none;\n  color: #606266;\n}\n\n.tier_4_elcol {\n  height: 50px;\n  padding-top: 12px;\n  font: 14px, Microsoft YaHei;\n  border: solid 1px lightgray;\n  border-left-style: none;\n  border-right-style: none;\n  color: #606266;\n  background: #fafafa;\n  margin-top: -1px;\n}\n</style>\n"]}]}