{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\前端5.10\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\前端5.10\\src\\views\\Handover.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\前端5.10\\src\\views\\Handover.vue","mtime":1652150561876},{"path":"C:\\Users\\Administrator\\Desktop\\前端5.10\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651901507383},{"path":"C:\\Users\\Administrator\\Desktop\\前端5.10\\node_modules\\babel-loader\\lib\\index.js","mtime":1651901509007},{"path":"C:\\Users\\Administrator\\Desktop\\前端5.10\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651901507383},{"path":"C:\\Users\\Administrator\\Desktop\\前端5.10\\node_modules\\vue-loader\\lib\\index.js","mtime":1651901509384}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBjcmVhdGVkKCkgewogICAgLy8g6LCD55So5b2T5YmN55qEZ2V0VXNlckxpc3Tmlrnms5UKICAgIHRoaXMuZ2V0SGFuZG92ZXJSZWNvcmRMaXN0KCk7CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWRkUmVjb3JkRm9ybTogewogICAgICAgIGNvbW1vbjogIiIsCiAgICAgICAgc3BlY2lhbDogIiIsCiAgICAgIH0sCiAgICAgIGdldEhlYWRlckRhdGFGb3JtOiB7fSwKCiAgICAgIGFkZFJlY29yZERpYWxvZ1Zpc2libGU6IGZhbHNlLCAvL+a3u+WKoOiusOW9leeahOWvueivneahhgoKICAgICAgdXBkYXRlUmVjb3JkRGlhbG9nVmlzaWJsZTogZmFsc2UsIC8v5L+u5pS56K6w5b2V55qE5a+56K+d5qGGCgogICAgICB1cGRhdGVSZWNvcmRGb3JtOiBbXSwKCiAgICAgIGhhbmRvdmVyUmVjb3JkTGlzdDogW10sIC8v6K6w5b2V5YiX6KGoCgogICAgICB0YWJsZURhdGExOiBbCiAgICAgICAgewogICAgICAgICAgcHJvYmxlbTE6ICLpl67popgxOueVmee7meS4i+S4gOePreasoeeahOmHjeimgeS6pOaOpeWGheWuuSAo5LiT57q/KSIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBwcm9ibGVtMTogIumXrumimDI655WZ57uZ5LiL5LiA54+t5qyh55qE6YeN6KaB5Lqk5o6l5YaF5a65ICjpgJrnlKgpIiwKICAgICAgICB9LAogICAgICBdLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKCiAgICBhZGRSZWNvcmQgKCkgewogICAgICB0aGlzLiRyZWZzLmFkZFJlY29yZEZvcm1SZWYudmFsaWRhdGUoYXN5bmMgKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKCF2YWxpZCkgcmV0dXJuOwogICAgICAgIHRoaXMucmVxdWVzdC5wb3N0KCIvYWRkSGFuZG92ZXJSZWNvcmQiLCB0aGlzLmFkZFJlY29yZEZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcyMDAnKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIua3u+WKoOiusOW9leaIkOWKn++8gSIpCiAgICAgICAgICB0aGlzLmdldEhhbmRvdmVyUmVjb3JkTGlzdCgpOwogICAgICAgICAgdGhpcy5hZGRSZWNvcmREaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIua3u+WKoOiusOW9leWksei0pe+8gSIpCiAgICAgICAgfQogICAgICB9KQogICAgICB9KTsKICAgIH0sCgogICAgLy8gYWRkUmVjb3JkKCkgewogICAgLy8gICB0aGlzLiRyZWZzLmFkZFJlY29yZEZvcm1SZWYudmFsaWRhdGUoYXN5bmMgKHZhbGlkKSA9PiB7CiAgICAvLyAgICAgaWYgKCF2YWxpZCkgcmV0dXJuOwogICAgLy8gICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoCiAgICAvLyAgICAgICAiYWRkSGFuZG92ZXJSZWNvcmQiLAogICAgLy8gICAgICAgdGhpcy5hZGRSZWNvcmRGb3JtCiAgICAvLyAgICAgKTsKICAgIC8vICAgICBpZiAocmVzICE9ICJzdWNjZXNzIikgewogICAgLy8gICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaWsOW7uumAmuefpeWksei0pe+8gSIpOwogICAgLy8gICAgIH0KICAgIC8vICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuaWsOW7uumAmuefpeaIkOWKn++8gSIpOyAvL+aPkOekuuS/oeaBrwogICAgLy8gICAgIHRoaXMuZ2V0SGFuZG92ZXJSZWNvcmRMaXN0KCk7CiAgICAvLyAgICAgdGhpcy5hZGRSZWNvcmREaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAvLyAgIH0pOwogICAgLy8gfSwKCiAgICBhZGRSZWNvcmREaWFsb2dDbG9zZWQoKSB7CiAgICAgIHRoaXMuJHJlZnMuYWRkUmVjb3JkRm9ybVJlZi5yZXNldEZpZWxkcygpOwogICAgfSwKCiAgICB1cGRhdGVSZWNvcmREaWFsb2dDbG9zZWQoKSB7CiAgICAgIHRoaXMudXBkYXRlUmVjb3JkRGlhbG9nVmlzaWJsZSA9IGZhbHNlOyAvL+mHjee9ruS/oeaBrwogICAgICB0aGlzLmdldEhhbmRvdmVyUmVjb3JkTGlzdCgpOwogICAgfSwKCiAgICAgICAgLy/noa7orqTkv67mlLkKICAgIHVwZGF0ZVJlY29yZEluZm8gKCkgewogICAgICB0aGlzLiRyZWZzLnVwZGF0ZVJlY29yZEZvcm1SZWZbMF0udmFsaWRhdGUoYXN5bmMgKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKCF2YWxpZCkgcmV0dXJuOyAvL+mqjOivgeWksei0pQoKICAgICAgICB0aGlzLnJlcXVlc3QucG9zdCgiL3VwZGF0ZUhhbmRvdmVyUmVjb3JkIiwgdGhpcy51cGRhdGVSZWNvcmRGb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcyMDAnKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5L+u5pS56K6w5b2V5oiQ5Yqf77yBIikKICAgICAgICAgICAgdGhpcy5nZXRIYW5kb3ZlclJlY29yZExpc3QoKTsKICAgICAgICAgICAgdGhpcy51cGRhdGVSZWNvcmREaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLkv67mlLnorrDlvZXlpLHotKXvvIEiKQogICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgfSk7CiAgICB9LAoKICAgIC8vIHVwZGF0ZVJlY29yZEluZm8oKSB7CiAgICAvLyAgIHRoaXMuJHJlZnMudXBkYXRlUmVjb3JkRm9ybVJlZlswXS52YWxpZGF0ZShhc3luYyAodmFsaWQpID0+IHsKICAgIC8vICAgICBpZiAoIXZhbGlkKSByZXR1cm47IC8v6aqM6K+B5aSx6LSlCgogICAgLy8gICAgIC8vIOWPkei1t+S/ruaUueivt+axggogICAgLy8gICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLnB1dCgKICAgIC8vICAgICAgICJ1cGRhdGVIYW5kb3ZlclJlY29yZCIsCiAgICAvLyAgICAgICB0aGlzLnVwZGF0ZVJlY29yZEZvcm0KICAgIC8vICAgICApOwogICAgLy8gICAgIGlmIChyZXMgIT0gInN1Y2Nlc3MiKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcigi5L+u5pS56YCa55+l5aSx6LSl77yBIik7CiAgICAvLyAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLkv67mlLnpgJrnn6XmiJDlip/vvIEiKTsKICAgIC8vICAgICB0aGlzLmdldEhhbmRvdmVyUmVjb3JkTGlzdCgpOwogICAgLy8gICAgIC8v6ZqQ6JeP5L+u5pS56K6w5b2V5L+h5oGv5a+56K+d5qGGCiAgICAvLyAgICAgdGhpcy51cGRhdGVSZWNvcmREaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAvLyAgIH0pOwogICAgLy8gfSwKCiAgICAvLyDojrflj5bmiYDmnInorrDlvZXkv6Hmga8KICAgIGdldEhhbmRvdmVyUmVjb3JkTGlzdCgpIHsKICAgICAgdGhpcy5yZXF1ZXN0LmdldCgiL2dldEhhbmRvdmVyUmVjb3JkIikudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuaGFuZG92ZXJSZWNvcmRMaXN0ID0gcmVzLmRhdGEKICAgICAgICB0aGlzLnVwZGF0ZVJlY29yZEZvcm0gPSByZXMuZGF0YVswXTsKICAgICAgfSl9LAoKICAgIC8vIGFzeW5jIGdldEhhbmRvdmVyUmVjb3JkTGlzdCgpIHsKICAgIC8vICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCJnZXRIYW5kb3ZlclJlY29yZCIpOyAvL2dldOivt+axguaWueazlQogICAgLy8gICB0aGlzLmhhbmRvdmVyUmVjb3JkTGlzdCA9IHJlcy5kYXRhOwogICAgLy8gICB0aGlzLnVwZGF0ZVJlY29yZEZvcm0gPSByZXMuZGF0YVswXTsKICAgIC8vIH0sCgogICAgYXN5bmMgcmVmcmVzaFJlY29yZCgpIHsKICAgICAgdGhpcy5nZXRIYW5kb3ZlclJlY29yZExpc3QoKTsKICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmm7TmlrDpgJrnn6XmiJDlip/vvIEiKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["Handover.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Handover.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <!-- 面包屑 -->\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>巡检普通板块</el-breadcrumb-item>\n      <el-breadcrumb-item>交接内容</el-breadcrumb-item>\n    </el-breadcrumb>\n\n    <el-card>\n      <el-button type=\"primary\" @click=\"addRecordDialogVisible = true\"\n        >新建通知</el-button\n      >\n\n      <el-button type=\"primary\" @click=\"updateRecordDialogVisible = true\"\n        >修改通知</el-button\n      >\n\n      <!-- <el-button type=\"primary\" @click=\"refreshRecord\">更新通知</el-button> -->\n\n      <el-button type=\"primary\">查看历史通知</el-button>\n\n      <el-button type=\"primary\">导出</el-button>\n    </el-card>\n\n    <el-card style=\"height: 210px\">\n      <!-- Tier1会议填写表格 stripe:斑马线格式-->\n      <el-table :data=\"tableData1\" stripe style=\"width: 50%\">\n        <el-table-column prop=\"problem1\" width=\"600\" label=\"交接内容\">\n        </el-table-column>\n      </el-table>\n    </el-card>\n\n    <el-dialog\n      title=\"新建通知\"\n      :visible.sync=\"addRecordDialogVisible\"\n      width=\"40%\"\n      @close=\"addRecordDialogClosed\"\n      v-dialogDrag\n    >\n      <el-card>\n        <el-form :model=\"addRecordForm\" ref=\"addRecordFormRef\">\n          <el-form-item>\n            <span class=\"span1\">通用交接内容</span>\n          </el-form-item>\n          <el-form-item style=\"margin-top: -20px\" prop=\"common\">\n            <el-input\n              type=\"textarea\"\n              :rows=\"4\"\n              style=\"width: 480px\"\n              :clearable=\"true\"\n              placeholder=\"请输入通用交接内容\"\n              v-model=\"addRecordForm.common\"\n            ></el-input>\n          </el-form-item>\n\n          <el-form-item>\n            <span class=\"span1\">专线交接内容</span>\n          </el-form-item>\n          <el-form-item style=\"margin-top: -20px\" prop=\"special\">\n            <el-input\n              type=\"textarea\"\n              :rows=\"4\"\n              style=\"width: 480px\"\n              :clearable=\"true\"\n              placeholder=\"请输入通用交接内容\"\n              v-model=\"addRecordForm.special\"\n            ></el-input>\n          </el-form-item>\n        </el-form>\n      </el-card>\n\n      <!-- 表单底部按钮 -->\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"addRecordDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"addRecord\">确定</el-button>\n      </span>\n    </el-dialog>\n\n    <el-dialog\n      title=\"修改通知\"\n      :visible.sync=\"updateRecordDialogVisible\"\n      width=\"40%\"\n      @close=\"updateRecordDialogClosed\"\n      v-dialogDrag\n    >\n      <el-card>\n        <el-form\n          :model=\"updateRecordForm\"\n          ref=\"updateRecordFormRef\"\n          v-for=\"(item, index) in handoverRecordList\"\n          :key=\"index\"\n          :label2=\"item\"\n        >\n          <el-form-item>\n            <span class=\"span1\">通用交接内容</span>\n          </el-form-item>\n          <el-form-item style=\"margin-top: -20px\" prop=\"common\">\n            <el-input\n              type=\"textarea\"\n              :rows=\"4\"\n              style=\"width: 480px\"\n              :clearable=\"true\"\n              placeholder=\"请输入通用交接内容\"\n              v-model=\"updateRecordForm.common\"\n            ></el-input>\n          </el-form-item>\n\n          <el-form-item>\n            <span class=\"span1\">专线交接内容</span>\n          </el-form-item>\n          <el-form-item style=\"margin-top: -20px\" prop=\"special\">\n            <el-input\n              type=\"textarea\"\n              :rows=\"4\"\n              style=\"width: 480px\"\n              :clearable=\"true\"\n              placeholder=\"请输入通用交接内容\"\n              v-model=\"updateRecordForm.special\"\n            ></el-input>\n          </el-form-item>\n        </el-form>\n      </el-card>\n\n      <!-- 表单底部按钮 -->\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"updateRecordDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"updateRecordInfo\">确定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  created() {\n    // 调用当前的getUserList方法\n    this.getHandoverRecordList();\n  },\n  data() {\n    return {\n      addRecordForm: {\n        common: \"\",\n        special: \"\",\n      },\n      getHeaderDataForm: {},\n\n      addRecordDialogVisible: false, //添加记录的对话框\n\n      updateRecordDialogVisible: false, //修改记录的对话框\n\n      updateRecordForm: [],\n\n      handoverRecordList: [], //记录列表\n\n      tableData1: [\n        {\n          problem1: \"问题1:留给下一班次的重要交接内容 (专线)\",\n        },\n        {\n          problem1: \"问题2:留给下一班次的重要交接内容 (通用)\",\n        },\n      ],\n    };\n  },\n  methods: {\n\n    addRecord () {\n      this.$refs.addRecordFormRef.validate(async (valid) => {\n        if (!valid) return;\n        this.request.post(\"/addHandoverRecord\", this.addRecordForm).then(res => {\n        if (res.code === '200') {\n          this.$message.success(\"添加记录成功！\")\n          this.getHandoverRecordList();\n          this.addRecordDialogVisible = false;\n        } else {\n          this.$message.error(\"添加记录失败！\")\n        }\n      })\n      });\n    },\n\n    // addRecord() {\n    //   this.$refs.addRecordFormRef.validate(async (valid) => {\n    //     if (!valid) return;\n    //     const { data: res } = await this.$http.post(\n    //       \"addHandoverRecord\",\n    //       this.addRecordForm\n    //     );\n    //     if (res != \"success\") {\n    //       return this.$message.error(\"新建通知失败！\");\n    //     }\n    //     this.$message.success(\"新建通知成功！\"); //提示信息\n    //     this.getHandoverRecordList();\n    //     this.addRecordDialogVisible = false;\n    //   });\n    // },\n\n    addRecordDialogClosed() {\n      this.$refs.addRecordFormRef.resetFields();\n    },\n\n    updateRecordDialogClosed() {\n      this.updateRecordDialogVisible = false; //重置信息\n      this.getHandoverRecordList();\n    },\n\n        //确认修改\n    updateRecordInfo () {\n      this.$refs.updateRecordFormRef[0].validate(async (valid) => {\n        if (!valid) return; //验证失败\n\n        this.request.post(\"/updateHandoverRecord\", this.updateRecordForm).then(res => {\n          if (res.code === '200') {\n            this.$message.success(\"修改记录成功！\")\n            this.getHandoverRecordList();\n            this.updateRecordDialogVisible = false;\n          } else {\n            this.$message.error(\"修改记录失败！\")\n          }\n          })\n      });\n    },\n\n    // updateRecordInfo() {\n    //   this.$refs.updateRecordFormRef[0].validate(async (valid) => {\n    //     if (!valid) return; //验证失败\n\n    //     // 发起修改请求\n    //     const { data: res } = await this.$http.put(\n    //       \"updateHandoverRecord\",\n    //       this.updateRecordForm\n    //     );\n    //     if (res != \"success\") return this.$message.error(\"修改通知失败！\");\n    //     this.$message.success(\"修改通知成功！\");\n    //     this.getHandoverRecordList();\n    //     //隐藏修改记录信息对话框\n    //     this.updateRecordDialogVisible = false;\n    //   });\n    // },\n\n    // 获取所有记录信息\n    getHandoverRecordList() {\n      this.request.get(\"/getHandoverRecord\").then(res => {\n        this.handoverRecordList = res.data\n        this.updateRecordForm = res.data[0];\n      })},\n\n    // async getHandoverRecordList() {\n    //   const { data: res } = await this.$http.get(\"getHandoverRecord\"); //get请求方法\n    //   this.handoverRecordList = res.data;\n    //   this.updateRecordForm = res.data[0];\n    // },\n\n    async refreshRecord() {\n      this.getHandoverRecordList();\n      this.$message.success(\"更新通知成功！\");\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.span1 {\n  color: #909399;\n  font-size: 15px;\n  font-family: Microsoft YaHei;\n}\n</style>\n"]}]}