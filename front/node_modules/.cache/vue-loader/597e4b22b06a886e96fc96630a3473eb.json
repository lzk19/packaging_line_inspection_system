{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\前端5.9\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\前端5.9\\src\\views\\Handover.vue?vue&type=style&index=0&id=7ecdb306&lang=less&scoped=true&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\前端5.9\\src\\views\\Handover.vue","mtime":1652150561876},{"path":"C:\\Users\\Administrator\\Desktop\\前端5.9\\node_modules\\css-loader\\dist\\cjs.js","mtime":1651901507998},{"path":"C:\\Users\\Administrator\\Desktop\\前端5.9\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1651901510113},{"path":"C:\\Users\\Administrator\\Desktop\\前端5.9\\node_modules\\postcss-loader\\src\\index.js","mtime":1651901508984},{"path":"C:\\Users\\Administrator\\Desktop\\前端5.9\\node_modules\\less-loader\\dist\\cjs.js","mtime":1651901508660},{"path":"C:\\Users\\Administrator\\Desktop\\前端5.9\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651901507383},{"path":"C:\\Users\\Administrator\\Desktop\\前端5.9\\node_modules\\vue-loader\\lib\\index.js","mtime":1651901509384}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouc3BhbjEgewogIGNvbG9yOiAjOTA5Mzk5OwogIGZvbnQtc2l6ZTogMTVweDsKICBmb250LWZhbWlseTogTWljcm9zb2Z0IFlhSGVpOwp9Cg=="},{"version":3,"sources":["Handover.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuQA;AACA;AACA;AACA;AACA","file":"Handover.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <!-- 面包屑 -->\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>巡检普通板块</el-breadcrumb-item>\n      <el-breadcrumb-item>交接内容</el-breadcrumb-item>\n    </el-breadcrumb>\n\n    <el-card>\n      <el-button type=\"primary\" @click=\"addRecordDialogVisible = true\"\n        >新建通知</el-button\n      >\n\n      <el-button type=\"primary\" @click=\"updateRecordDialogVisible = true\"\n        >修改通知</el-button\n      >\n\n      <!-- <el-button type=\"primary\" @click=\"refreshRecord\">更新通知</el-button> -->\n\n      <el-button type=\"primary\">查看历史通知</el-button>\n\n      <el-button type=\"primary\">导出</el-button>\n    </el-card>\n\n    <el-card style=\"height: 210px\">\n      <!-- Tier1会议填写表格 stripe:斑马线格式-->\n      <el-table :data=\"tableData1\" stripe style=\"width: 50%\">\n        <el-table-column prop=\"problem1\" width=\"600\" label=\"交接内容\">\n        </el-table-column>\n      </el-table>\n    </el-card>\n\n    <el-dialog\n      title=\"新建通知\"\n      :visible.sync=\"addRecordDialogVisible\"\n      width=\"40%\"\n      @close=\"addRecordDialogClosed\"\n      v-dialogDrag\n    >\n      <el-card>\n        <el-form :model=\"addRecordForm\" ref=\"addRecordFormRef\">\n          <el-form-item>\n            <span class=\"span1\">通用交接内容</span>\n          </el-form-item>\n          <el-form-item style=\"margin-top: -20px\" prop=\"common\">\n            <el-input\n              type=\"textarea\"\n              :rows=\"4\"\n              style=\"width: 480px\"\n              :clearable=\"true\"\n              placeholder=\"请输入通用交接内容\"\n              v-model=\"addRecordForm.common\"\n            ></el-input>\n          </el-form-item>\n\n          <el-form-item>\n            <span class=\"span1\">专线交接内容</span>\n          </el-form-item>\n          <el-form-item style=\"margin-top: -20px\" prop=\"special\">\n            <el-input\n              type=\"textarea\"\n              :rows=\"4\"\n              style=\"width: 480px\"\n              :clearable=\"true\"\n              placeholder=\"请输入通用交接内容\"\n              v-model=\"addRecordForm.special\"\n            ></el-input>\n          </el-form-item>\n        </el-form>\n      </el-card>\n\n      <!-- 表单底部按钮 -->\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"addRecordDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"addRecord\">确定</el-button>\n      </span>\n    </el-dialog>\n\n    <el-dialog\n      title=\"修改通知\"\n      :visible.sync=\"updateRecordDialogVisible\"\n      width=\"40%\"\n      @close=\"updateRecordDialogClosed\"\n      v-dialogDrag\n    >\n      <el-card>\n        <el-form\n          :model=\"updateRecordForm\"\n          ref=\"updateRecordFormRef\"\n          v-for=\"(item, index) in handoverRecordList\"\n          :key=\"index\"\n          :label2=\"item\"\n        >\n          <el-form-item>\n            <span class=\"span1\">通用交接内容</span>\n          </el-form-item>\n          <el-form-item style=\"margin-top: -20px\" prop=\"common\">\n            <el-input\n              type=\"textarea\"\n              :rows=\"4\"\n              style=\"width: 480px\"\n              :clearable=\"true\"\n              placeholder=\"请输入通用交接内容\"\n              v-model=\"updateRecordForm.common\"\n            ></el-input>\n          </el-form-item>\n\n          <el-form-item>\n            <span class=\"span1\">专线交接内容</span>\n          </el-form-item>\n          <el-form-item style=\"margin-top: -20px\" prop=\"special\">\n            <el-input\n              type=\"textarea\"\n              :rows=\"4\"\n              style=\"width: 480px\"\n              :clearable=\"true\"\n              placeholder=\"请输入通用交接内容\"\n              v-model=\"updateRecordForm.special\"\n            ></el-input>\n          </el-form-item>\n        </el-form>\n      </el-card>\n\n      <!-- 表单底部按钮 -->\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"updateRecordDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"updateRecordInfo\">确定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  created() {\n    // 调用当前的getUserList方法\n    this.getHandoverRecordList();\n  },\n  data() {\n    return {\n      addRecordForm: {\n        common: \"\",\n        special: \"\",\n      },\n      getHeaderDataForm: {},\n\n      addRecordDialogVisible: false, //添加记录的对话框\n\n      updateRecordDialogVisible: false, //修改记录的对话框\n\n      updateRecordForm: [],\n\n      handoverRecordList: [], //记录列表\n\n      tableData1: [\n        {\n          problem1: \"问题1:留给下一班次的重要交接内容 (专线)\",\n        },\n        {\n          problem1: \"问题2:留给下一班次的重要交接内容 (通用)\",\n        },\n      ],\n    };\n  },\n  methods: {\n\n    addRecord () {\n      this.$refs.addRecordFormRef.validate(async (valid) => {\n        if (!valid) return;\n        this.request.post(\"/addHandoverRecord\", this.addRecordForm).then(res => {\n        if (res.code === '200') {\n          this.$message.success(\"添加记录成功！\")\n          this.getHandoverRecordList();\n          this.addRecordDialogVisible = false;\n        } else {\n          this.$message.error(\"添加记录失败！\")\n        }\n      })\n      });\n    },\n\n    // addRecord() {\n    //   this.$refs.addRecordFormRef.validate(async (valid) => {\n    //     if (!valid) return;\n    //     const { data: res } = await this.$http.post(\n    //       \"addHandoverRecord\",\n    //       this.addRecordForm\n    //     );\n    //     if (res != \"success\") {\n    //       return this.$message.error(\"新建通知失败！\");\n    //     }\n    //     this.$message.success(\"新建通知成功！\"); //提示信息\n    //     this.getHandoverRecordList();\n    //     this.addRecordDialogVisible = false;\n    //   });\n    // },\n\n    addRecordDialogClosed() {\n      this.$refs.addRecordFormRef.resetFields();\n    },\n\n    updateRecordDialogClosed() {\n      this.updateRecordDialogVisible = false; //重置信息\n      this.getHandoverRecordList();\n    },\n\n        //确认修改\n    updateRecordInfo () {\n      this.$refs.updateRecordFormRef[0].validate(async (valid) => {\n        if (!valid) return; //验证失败\n\n        this.request.post(\"/updateHandoverRecord\", this.updateRecordForm).then(res => {\n          if (res.code === '200') {\n            this.$message.success(\"修改记录成功！\")\n            this.getHandoverRecordList();\n            this.updateRecordDialogVisible = false;\n          } else {\n            this.$message.error(\"修改记录失败！\")\n          }\n          })\n      });\n    },\n\n    // updateRecordInfo() {\n    //   this.$refs.updateRecordFormRef[0].validate(async (valid) => {\n    //     if (!valid) return; //验证失败\n\n    //     // 发起修改请求\n    //     const { data: res } = await this.$http.put(\n    //       \"updateHandoverRecord\",\n    //       this.updateRecordForm\n    //     );\n    //     if (res != \"success\") return this.$message.error(\"修改通知失败！\");\n    //     this.$message.success(\"修改通知成功！\");\n    //     this.getHandoverRecordList();\n    //     //隐藏修改记录信息对话框\n    //     this.updateRecordDialogVisible = false;\n    //   });\n    // },\n\n    // 获取所有记录信息\n    getHandoverRecordList() {\n      this.request.get(\"/getHandoverRecord\").then(res => {\n        this.handoverRecordList = res.data\n        this.updateRecordForm = res.data[0];\n      })},\n\n    // async getHandoverRecordList() {\n    //   const { data: res } = await this.$http.get(\"getHandoverRecord\"); //get请求方法\n    //   this.handoverRecordList = res.data;\n    //   this.updateRecordForm = res.data[0];\n    // },\n\n    async refreshRecord() {\n      this.getHandoverRecordList();\n      this.$message.success(\"更新通知成功！\");\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.span1 {\n  color: #909399;\n  font-size: 15px;\n  font-family: Microsoft YaHei;\n}\n</style>\n"]}]}